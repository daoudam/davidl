<!DOCTYPE html><html lang=fr><head prefix="og: http://ogp.me/ns# dc: http://purl.org/dc/terms/"><meta charset=utf-8 /><meta content="width=device-width" name=viewport /><meta content="IE=edge" http-equiv=X-UA-Compatible /><title>Migration de Wordpress vers ruby et Middleman</title><meta content="" name=description /><meta content="index,follow" name=robots /><meta content="David Leuliette" property="dc:creator"/><meta content="text/html" property="dc:format"/><meta content=fr-FR property="dc:language"/><meta content="DavidL design + développement" property="og:site_name"/><meta content=website property="og:type"/><meta content="http://davidl.fr" property="og:url"/><meta content="Migration de Wordpress vers ruby et Middleman" property="og:title"/><meta content="" property="og:description"/><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" property="og:image"/><meta content="50.629250;3.057256" name="geo.position"/><meta content="Lille, Nord" name="geo.placename"/><meta content=FR-59 name="geo.region"/><meta content="DavidL design + développement" name="twitter:card"/><meta content="@_flexbox" name="twitter:site"/><meta content="@_flexbox" name="twitter:creator"/><meta content="http://davidl.fr" name="twitter:domain"/><meta content="Migration de Wordpress vers ruby et Middleman" name="twitter:title"/><meta content="" name="twitter:description"/><meta content="" name="twitter:image:src"/><meta content="Migration de Wordpress vers ruby et Middleman" itemprop=name /><meta content="" itemprop=description /><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" itemprop=image /><link href="https://plus.google.com/+DavidLeulietteWeb" rel=publisher /><link href="/feed.xml" rel=alternate title="DavidL design + développement" type="application/rss+xml"/><link href="/apple-touch-icon.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-57x57-precomposed.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-60x60-precomposed.png" rel=apple-touch-icon sizes=60x60 /><link href="/apple-touch-icon-72x72-precomposed.png" rel=apple-touch-icon sizes=72x72 /><link href="/apple-touch-icon-76x76-precomposed.png" rel=apple-touch-icon sizes=76x76 /><link href="/apple-touch-icon-114x114-precomposed.png" rel=apple-touch-icon sizes=114x114 /><link href="/apple-touch-icon-120x120-precomposed.png" rel=apple-touch-icon sizes=120x120 /><link href="/apple-touch-icon-144x144-precomposed.png" rel=apple-touch-icon sizes=144x144 /><link href="/apple-touch-icon-152x152-precomposed.png" rel=apple-touch-icon sizes=152x152 /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><meta content="#f5f5f5" name=msapplication-TileColor /><meta content="/mstile-144x144.png" name=msapplication-TileImage /><link href="../assets/stylesheets/application-2c7d406e.css" rel=stylesheet /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel=stylesheet /></head><body><div class=m-topbar id=js-topbar role=banner><nav aria-label=Primary class="m-topbar--list js-topbar--list is-away" role=navigation><a class=m-topbar--logo title="Retour à l’accueil" href="/"><img alt="davidl intégrateur web &amp; développeur front-end lille" src="../assets/images/atom-logo-e03c19e4.svg"/></a><a href="/about.html">À propos</a><a href="/blog/">Journal</a><a href="/contact.html">Contact</a></nav><div class=m-topbar--form id=js-topbar--form><a id=js-topbar--button class=l-menu href="#"><span>Menu</span></a><form action="//www.google.com/search" class="l-search-form is-hidden" method=get><input id=js-search-input name=q placeholder="Ex : Conseils et bonnes pratiques" type=search /><input name=sitesearch type=hidden value="http://davidl.fr"/></form><a id=js-topbar--search class=l-action href="#"><i class="fa fa-search"></i></a><a id=js-topbar--close class="l-action is-hidden" href="#"><i class="fa fa-close"></i></a></div></div><div class=m-content role=main><header class=m-hero-intro><h1 class=l-title>J'ai quitté Wordpress,<br> Pourquoi ? Comment ?</h1><div class=l-icon><i class="fa fa-angle-down"></i></div></header><div class=row><div class="medium-8 columns"></div><div class="medium-4 columns"><p class=m-post-list--calendar><i class="fa fa-calendar i-custom fa-lg"></i><span class=l-day>14</span>/<span class=l-month>04</span>/<span class=l-year>2014</span></p></div></div><article class=row itemscope="" itemtype="http://schema.org/BlogPosting" role=article><div class="medium-8 medium-centered columns blog-article" itemprop=articleBody><p>Depuis quelque temps maintenant j’ai dit <a href="//lesjoiesducode.fr/post/78835971429/quand-lintegrateur-veut-toucher-au-php">au revoir à Wordpress</a> et bonjour à middleman. J'ai décidé de m'éloigner de Wordpress, car je me retrouvais souvent à livrer bataille avec l’interface d'administration et le flux de travail de publication, juste pour faire des choses simples.</p> <p>Travailler avec le tinymce et le <code>HTML</code> fonctionne plutôt bien, mais je trouve que l'écriture en <code>Markdown</code> est beaucoup plus simple et <a href="//fr.wikipedia.org/wiki/Environnement_pervasif">pervasive</a>. Je passais mon temps à enlever des fonctionnalités, mettre à jour et installer des modules qui par dizaines en utilisant finalement 30% des fonctionnalités.</p> <p>J'ai donc quitté le monde Wordpress et <code>php</code> pour travailler en <code>ruby</code> avec un générateur de site statiques : <a href="//middlemanapp.com/">middleman</a>.</p> <h2 id=les-avantages>Les avantages</h2> <h3 id=rapidit-dcriture>Rapidité d’écriture</h3> <p>Personnellement voici mon workflow pour publier du contenu.</p> <ul> <li>J’écris en markdown avec evernote (Généralement depuis ma tablette).</li> <li>Je passe sur un ordinateur fixe pour gérer les medias images.</li> <li>Je déploie depuis mon ordinateur portable.</li> </ul> <p>L’interface de Wordpress est un bonne chose et propose <s>énormément</s>, beaucoups trop d’options pour moi. Trop de solicitations qui au final perturbent votre flux de production de contenu. Un peu comme windows vous passez votre temps à protéger le système contre lui-même au lieu de travailler de façon efficace.</p> <h3 id=rapidit-du-site>Rapidité du site</h3> <p>C’est simple : un site web statique se charge plus vite qu’un site hébergé sous Wordpress. <a href="https://twitter.com/ABrisset">@abrisset</a> a fait l’expérience et chiffre à l’appui voici le résultat :</p> <p><img alt="migration Wordpress - ruby on rails" src="https://farm4.staticflickr.com/3724/13851401935_98a7267d54_o.png"/></p> <p><em>Le site se charge 10 fois plus vite</em>.</p> <h3 id=pas-de-base-de-donnes>Pas de base de données</h3> <p>Pas de configuration, pas de système complexes, pas de hack possible en accédant à <code>/wp-admin/</code>. Travailler sur différents environnements est d'une simplicité déconcertante avec un <code>git clone nom-du-projet</code>.</p> <p>La base de données est remplacé par de simples fichiers textes <code>.yml</code> pour la configuration ou <code>.markdown</code> pour le contenu.</p> <h3 id=contrle-du-code>Contrôle du code</h3> <p>Wordpress est une bonne solution, mais niveau architecture du code et maintenance c’est juste le chaos le plus complet. On bourre tout dans <code>function.php</code> et on verra après.</p> <p>Comme tout le monde :</p> <ul> <li>J'ai téléchargé un thème pour le modifier et me rendre compte qu'au final je n'avais besoin que de 10% des fonctionnalités offertes.</li> <li>Je suis passé par la case framework de thèmes pour Wordpress, qui au final complexifiait l'architecture.</li> <li>Ma dernière expérience fut d'utiliser <a href="//underscores.me/">underscore</a> (Un boilerplate simple de thème). Mais les performances n'étaient pas au rendez-vous.</li> </ul> <p>Finalement j'ai <a href="//middlemanapp.com/">middleman</a> qui embarque de base <a href="//sass-lang.com/">Sass</a>, <a href="//coffeescript.org/">CoffeeScript</a> et juste ce qu'il faut de <a href="//rubyonrails.org/">ruby</a>. Je passe mon temps à construire des choses. Contrairement à Wordpress où je passais mon temps à faire des <em>dirty hacks</em>.</p> <h3 id=historique-des-version>Historique des version</h3> <p>Avec git, vous avez à votre disposition une machine à remonter le temps. Vous pouvez voir toutes vos modifications, créer des branches, tester des fonctionnalités et revenir en arrière facilement si cela ne fonctionne pas. Cela demande une certaine gymnatisque au début, mais impossible de revenir en arrière dès que l'on a commencé à comprendre comment cela fonctionne vraiment.</p> <h3 id=en-rsum>En résumé</h3> <ul> <li><strong>Markdown</strong> pour l'écriture.</li> <li><strong>Slim</strong> pour le templating HTML.</li> <li><strong>Sass</strong> en préprocesseur CSS.</li> <li><strong>CoffeeScript</strong> pour la compilation du JavaScript.</li> <li><strong>Git</strong> pour la gestion des fichiers.</li> <li><strong>Terminal</strong> pour <em>tout le reste</em>.</li> <li><strong>Automatique</strong> pour le déploiement.</li> <li><strong>Contrôle total</strong> du site et surtout de sa mise en page.</li> <li><strong>Accessible</strong> pour les débutants et évolutif pour les experts.</li> </ul> <h2 id=les-inconvnients>Les inconvénients</h2> <h3 id=le-media-manager>Le media manager</h3> <p>L'une des <em>killer feature</em> de Wordpress est sa gestion des images. Un simple drag &amp; drop et vous pouvez ajouter une légende, les medias sont resizés en différentes tailles, et il est très facile de retrouver sa collection d'image. Avec un générateur de site statique c'est plus compliqué car héberger ses images sur gitthub n'a pas de sens. Pour avoir des performances optimales vous devez utiliser un <em>CDN</em> comme cloudfront, spécialisé dans le stockage.</p> <p>Personnellement j'utilise le CDN du pauvre : flickR. Avec 1 To de stockage disponible dans sa version gratuite, son retaillage des images et l'upload des photos en drag &amp; drop, je met quiquonque au défi de trouver mieux.</p> <blockquote> <p>Sur flickR, si vous souhaitez faire un lien vers une image en .gif ou .png, sélectionnez la taille par défaut de votre image</p> <p><cite>Conseil du pro</cite></p> </blockquote> <p><strong>Edit :</strong> Depuis un petit moment il est impossible de récupérer les <code>.gif</code> lors de l'upload sur FlickR. Ma solution est d'utiliser le <a href="https://plus.google.com/photos/+DavidLeulietteWeb/albums/6018079515488972289">stockage d'image sur Google+</a>.</p> <h3 id=la-correction-orthographique>La correction orthographique</h3> <p>Mon contenu est écrit en mode texte brut dans un éditeur de texte. Difficile d'avoir des outils de correction automatique dans cet environnement. Il m'arrive régulièrement de faire des fautes de frappes malgré ma relecture et je n'ai à ce jour pas trouvé de solution.</p> <h3 id=pas-de-base-de-donnes-1>Pas de base de données</h3> <p>J’ai écris plus haut que c’était un avantage. C'est aussi un inconvénient dans le mesure où vous devrez sortir l'artillerie et le workflow de deploiement simplement pour corriger un "s" manquant. Avec Wordpress il suffit de se connecter à l'interface d'admin et c'est corrigé en 2-3 clics.</p> <h2 id=au-revoir-wordpress-et-bonjour-middleman>Au revoir Wordpress et bonjour middleman</h2> <p>Rome ne s’est pas construite en un jour et migrer l’intégralité de votre contenu vous demandera un peu d'investissement (Personnellement cela m’a pris un peu plus d’un mois) Voici 3 étapes qui vous feront gagner du temps :</p> <h3 id=transformer-ses-articles-en-markdown>1. Transformer ses articles en markdown</h3> <p>Exitwp est un outil pour <a href="https://github.com/thomasf/exitwp">migrer un ou plusieurs blogs Wordpress</a> vers le moteur de blog jekyll (un autre moteur de blog en ruby).</p> <h3 id=utiliser-un-cdn-pour-les-images>2. Utiliser un CDN pour les images</h3> <p>Flickr avec son offre 1 To est une bonne alternative à un vrai CDN. L’avantage principal est la création des différentes tailles d’images lors de l’upload.</p> <h3 id=raliser-un-plan-de-redirection>3. Réaliser un plan de redirection</h3> <p>Si vous ne souhaitez pas perdre la popularité associé à vos pages, vous devez faire des redirections 301. Le remercie <a href="https://twitter.com/rduhomez">@rduhomez</a>, référenceur de talent, pour m'avoir épargné quelques crises de nerf avec ses précieux conseils. J'ai simplement réalisé un export de toutes mes anciennes url et mis en place des redirections avec le pattern suivant :</p> <pre class="highlight plaintext"><code>Redirect permanent /wordpress/about/ http://davidl.fr/about.html
</code></pre> <p>Cette méthode peut être largement optimisée, et j'ai certainement perdu quelques morceaux dans la bataille, mais mon objectif principal et de produire du contenu &amp; du code. De toute façon le SEO ça ne sert à rien ;) #privatejoke</p> <h2 id=conclusion>Conclusion</h2> <p>Ce système n'est pas adapté à tout le monde, et il faut une certaine philosophie de hacker / développeur / GitHuber pour travailler de cette façon. Dans mon cas, j'ai remarqué que c'est beaucoup plus efficace. Couplé avec bower je peux tester n'importe quelle fonctionnalité très rapidement comme les <a href="//davidl.fr/projects.html">filtres avec mixitup</a>, les <a href="//davidl.fr/webdesign.html">vidéos en background</a>, changer complètement <a href="//davidl.fr/books.html">l'aspect du layout</a> et utiliser des fichiers de données <code>.yml</code> pour être évolutif …</p> <h2 id=ressources>Ressources</h2> <ul> <li><a href="https://github.com/thomasf/exitwp">exitwp</a></li> <li><a href="//davidl.fr/blog/hebergement-gratuit-ovh.html">Héberger son site sur GitHub</a></li> </ul> <div class=row><div class="medium-8 medium-centered columns"><aside class=m-blog-panel itemprop=author itemscope="" itemtype="http://schema.org/Person" role=complementary><div class=row><div class="small-8 columns"><p>Publié par <a href="https://plus.google.com/+DavidLeulietteWeb?rel=author" itemprop=name>David Leuliette</a><br/><span itemprop=jobTitle>Développeur front-end </span></p><hr/><p>J'aime travailler avec les technologies web et le faire de la bonne façon. Je suis <em itemprop=title>évangéliste open source</em> , mon objectif est de partager les bonnes pratiques avec le plus grand nombre. </p><p><i class="fa fa-fw fa-twitter"></i><span itemprop=nickname><a href="https://twitter.com/_flexbox">@_flexbox</a> </span>sur twitter </p><p><i class="fa fa-fw fa-rss"></i><a href="/feed.xml">S'incrire au flux RSS</a></p></div><div class="small-4 columns"><a class=l-avatar href="/about.html"><img itemprop=image alt="Avatar Aperture Science" src="../assets/images/front/aperture-science-avatar-02c0ce7d.jpg"/></a></div></div></aside></div></div></div></article></div><footer class=m-footer role=contentinfo><nav class=row role=navigation><div class="medium-3 small-6 columns"><ul class=side-nav><li><a title="Mes engagements envers le web" href="/manifesto.html">Manifeste</a></li><li><a title="Cliquez si vous êtes perdus" href="/sitemap.html">Plan du site</a></li><li><a title="Je lis TOUS mes emails" href="/contact.html">Contact</a></li><li><a title="Je réponds chaque semaine à une question" href="/ask-me.html">Une question ?</a></li></ul></div><div class="medium-3 small-6 columns"><ul class=side-nav><li><a title="Publication d'articles sur l'intégration &amp; le développement front-end" href="/blog/">Blog</a></li><li><a title="conseils de lecture" href="/books.html">Bibliothèque</a></li><li><a title="Liste de personnes à suivre" href="/mentors.html">Mentors</a></li><li><a title="Travailler efficacement" href="/toolkit.html">Outils</a></li></ul></div><div class="medium-6 columns"><p class=m-footer--title>Améliorer vos compétences</p><p>Recevez mes conseils en développement front-end. Ne vous inquétez pas je déteste le spam, il suffit d'un clic pour se désabonner.</p><form action="//davidl.us3.list-manage2.com/subscribe/post?u=b72e60a9116993dde8d1547fe&amp;id=e99fbeb8ad" method=post name=mc-embedded-subscribe-form target=_blank><div class=row><div class="small-12 columns"><label for=js-mailchimpemail>S'abonner pour ne pas manquer les nouvelles publications </label></div></div><div class="row collapse"><div class="small-8 columns"><input autocapitalize=none autocorrect=off class=m-mailchimpemail id=js-mailchimpemail name=EMAIL placeholder="Saisissez votre adresse e-mail" required="" type=email /><div class=hide><input name=b_b72e60a9116993dde8d1547fe_e99fbeb8ad /></div></div><div class="small-4 columns"><input class="button postfix" id=mc-embedded-subscribe name=subscribe type=submit value="S’inscrire"/></div></div></form></div></nav><hr/><p class=l-text>Ce site open source est hébergé sur <a href="https://github.com/flexbox/davidl">GitHub</a>. Patches, suggestions et commentaires sont les bienvenus. </p><hr/><p class=l-text>davidl.fr est rédigé et administré par <a href="/human.txt">David Leuliette</a>, sous licence <a href="/gnu.html">GNU/GPL</a>. Vous pouvez lire les <a title="Licence du site &amp; hébergement" href="/legal.html">Mentions légales</a>. </p><p class=l-text>Dernière mise à jour le <time datetime=2015-03-15>15/03/2015. </time></p></footer><script src="../assets/javascripts/application-0cf1269e.js"></script><script>!function(e,a,n,t,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(n),s=a.getElementsByTagName(n)[0],o.async=1,o.src=t,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-46684635-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");</script></body></html>